name: V3.2(A) Route Planner (Weekly)

on: []

concurrency:
  group: v32a-route-planner
  cancel-in-progress: false

jobs:
  run:
    runs-on: ubuntu-latest
    timeout-minutes: 8
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      - env:
          SHEET_ID: ${{ secrets.SHEET_ID }}
          GCP_SA_JSON: ${{ secrets.GCP_SA_JSON }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          THEMES_TAB: ${{ vars.THEMES_TAB }}
          FEEDER_CONFIG_TAB: ${{ vars.FEEDER_CONFIG_TAB }}
          OPENAI_MODEL_PLANNER: ${{ vars.OPENAI_MODEL_PLANNER }}
          PLANNER_MAX_DESTS_PER_THEME: ${{ vars.PLANNER_MAX_DESTS_PER_THEME }}
          FEEDER_ORIGINS_JSON: ${{ vars.FEEDER_ORIGINS_JSON }}
        run: python workers/route_planner.py
